{"version":3,"file":"analytics-events-helper.esm.dev.js","sources":["../src/analytics-events-helper.js"],"sourcesContent":["export default class AnalyticsEventsHelper {\n  constructor(events) {\n    this.events = events\n    this._mandatoryKeys = ['domEvent', 'el', 'eventCategory', 'eventAction']\n    this._availableKeysForEvent = [\n      'eventCategory',\n      'eventAction',\n      'eventLabel',\n      'eventValue',\n    ]\n\n    console.group('Received events: ')\n    console.log(this.events)\n    console.groupEnd()\n\n    if (this._isValidConfig()) {\n      this.addEvents(this.events)\n    } else {\n      throw 'Invalid configuration exception.'\n    }\n  }\n\n  addEvent(event) {\n    let instance = this\n\n    let el = document.querySelectorAll(event.el)\n    for (let i = 0; i < el.length; i++) {\n      el[i].addEventListener(event.domEvent, function () {\n        if (ga !== undefined) {\n          ga(\n            'send',\n            Object.assign(\n              { hitType: 'event' },\n              instance._extractValuesFromEvent(event, this)\n            )\n          )\n        } else {\n          console.error(\n            'Google Analytics not included or blocked by the browser.'\n          )\n        }\n      })\n    }\n  }\n\n  addEvents(events) {\n    const self = this\n    events.forEach((event) => {\n      console.info(`Adding event \"${event.eventCategory}\".`)\n      self.addEvent(event)\n    })\n  }\n\n  _isValidConfig() {\n    if (this.events instanceof Array && this.events.length > 0) {\n      console.info('Configuration is Array and bigger than zero.')\n      for (let i = 0; i < this.events.length; i++) {\n        let currentEvent = this.events[i]\n        for (let j = 0; j < this._mandatoryKeys.length; j++) {\n          let currentMandatoryKey = this._mandatoryKeys[j]\n          console.info(\n            `Checking if configuration has mandatory key \"${currentMandatoryKey}\"`\n          )\n          if (\n            !currentEvent.hasOwnProperty(currentMandatoryKey) ||\n            currentEvent[currentMandatoryKey] === null\n          ) {\n            console.error(\n              `The configuration at position \"${j}\" doesn't have the mandatory key \"${currentMandatoryKey}\" or it's null.`\n            )\n            return false\n          }\n        }\n      }\n      return true\n    }\n\n    return false\n  }\n\n  _extractValuesFromEvent(event, el) {\n    let keys = Object.keys(event)\n    let values = {}\n    console.group(`Extracting values from event:`)\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i]\n      if (this._availableKeysForEvent.indexOf(key) === -1) {\n        console.log(`Invalid key for GA event:\"' + key + '\".`)\n        continue\n      }\n\n      let value = event[key]\n      if (typeof value === 'function') {\n        console.info(`Return type of the event key \"${key}\" is a function.`)\n        values[key] = value.apply(el)\n      } else {\n        console.info(\n          `Return type of the event key \"${key}\" is a literal \"${value}\".`\n        )\n        values[key] = value\n      }\n    }\n    console.group('Values:')\n    console.log(values)\n    console.groupEnd()\n    console.groupEnd()\n    return values\n  }\n}\n"],"names":["AnalyticsEventsHelper","events","_mandatoryKeys","_availableKeysForEvent","console","group","log","groupEnd","_isValidConfig","addEvents","event","instance","el","document","querySelectorAll","i","length","addEventListener","domEvent","ga","undefined","Object","assign","hitType","_extractValuesFromEvent","error","self","forEach","info","eventCategory","addEvent","Array","currentEvent","j","currentMandatoryKey","hasOwnProperty","keys","values","key","indexOf","value","apply"],"mappings":"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"}