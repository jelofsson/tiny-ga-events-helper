!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).TinyGaEventsHelper=n()}(this,(function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=["domEvent","el","eventCategory","eventAction"],o=["eventCategory","eventAction","eventLabel","eventValue"];return function(){function r(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{debug:!1};if(e(this,r),!ga)throw"Google Analytics not included or blocked by the browser.";if(this.events=n,this.options=t,this.options.debug&&(console.group("Received events: "),console.log(this.events),console.groupEnd()),!r.isValidConfig(this.events))throw"Invalid configuration exception.";this.addEvents(this.events)}var i,a,l;return i=r,l=[{key:"isValidConfig",value:function(e){if(!Array.isArray(e)||0===e.length)return!1;for(var n=0;n<e.length;n++)for(var o=e[n],r=0;r<t.length;r++){var i=t[r];if(!o.hasOwnProperty(i)||null===o[i])return console.warn('The configuration at position "'.concat(r,'" doesn\'t have the mandatory key "').concat(i,"\" or it's null.")),!1}return!0}},{key:"extractValuesFromEvent",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.keys(e),i={};t&&console.group("Extracting values from event:");for(var a=0;a<r.length;a++){var l=r[a];if(o.includes(l)){var s=e[l];"function"==typeof s?(t&&console.info('Return type of the event key "'.concat(l,'" is a function.')),i[l]=s.apply(n)):(t&&console.info('Return type of the event key "'.concat(l,'" is a literal "').concat(s,'".')),i[l]=s)}else t&&console.log("Invalid key for GA event:\"' + key + '\".")}return t&&(console.group("Values:"),console.log(i),console.groupEnd(),console.groupEnd()),i}}],(a=[{key:"addEvent",value:function(e){for(var n=this,t=document.querySelectorAll(e.el),o=0;o<t.length;o++){var i=t[o],a=function(){ga&&ga("send",Object.assign({hitType:"event"},r.extractValuesFromEvent(e,this,n.options.debug)))};i.addEventListener(e.domEvent,a),e.handlers=e.handlers||new Map,e.handlers.set(i,a)}}},{key:"addEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&e.map(this.addEvent.bind(this))}},{key:"destroy",value:function(){for(var e=0;e<this.events.length;e++)for(var n=this.events[e],t=document.querySelectorAll(n.el),o=0;o<t.length;o++){var r=t[o];r.removeEventListener(n.domEvent,n.handlers.get(r)),n.handlers.delete(r)}}}])&&n(i.prototype,a),l&&n(i,l),r}()}));
