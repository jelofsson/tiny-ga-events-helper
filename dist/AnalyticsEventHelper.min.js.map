{"version":3,"file":"AnalyticsEventHelper.min.js","sources":["../src/AnalyticsEventHelper.esm.js"],"sourcesContent":["export default class AnalyticsEventHelper {\n  constructor(events) {\n    this.events = events\n    this._mandatoryKeys = ['domEvent', 'el', 'eventCategory', 'eventAction']\n    this._availableKeysForEvent = [\n      'eventCategory',\n      'eventAction',\n      'eventLabel',\n      'eventValue',\n    ]\n\n    console.group('Received events: ')\n    console.log(this.events)\n    console.groupEnd()\n\n    if (this._isValidConfig()) {\n      this.addEvents(this.events)\n    } else {\n      throw 'Invalid configuration exception.'\n    }\n  }\n\n  addEvent(event) {\n    let instance = this\n\n    let el = document.querySelectorAll(event.el)\n    for (let i = 0; i < el.length; i++) {\n      el[i].addEventListener(event.domEvent, function () {\n        if (ga !== undefined) {\n          ga(\n            'send',\n            Object.assign(\n              { hitType: 'event' },\n              instance._extractValuesFromEvent(event, this)\n            )\n          )\n        } else {\n          console.error(\n            'Google Analytics not included or blocked by the browser.'\n          )\n        }\n      })\n    }\n  }\n\n  addEvents(events) {\n    const self = this\n    events.forEach((event) => {\n      console.info(`Adding event \"${event.eventCategory}\".`)\n      self.addEvent(event)\n    })\n  }\n\n  _isValidConfig() {\n    if (this.events instanceof Array && this.events.length > 0) {\n      console.info('Configuration is Array and bigger than zero.')\n      for (let i = 0; i < this.events.length; i++) {\n        let currentEvent = this.events[i]\n        for (let j = 0; j < this._mandatoryKeys.length; j++) {\n          let currentMandatoryKey = this._mandatoryKeys[j]\n          console.info(\n            `Checking if configuration has mandatory key \"${currentMandatoryKey}\"`\n          )\n          if (\n            !currentEvent.hasOwnProperty(currentMandatoryKey) ||\n            currentEvent[currentMandatoryKey] === null\n          ) {\n            console.error(\n              `The configuration at position \"${j}\" doesn't have the mandatory key \"${currentMandatoryKey}\" or it's null.`\n            )\n            return false\n          }\n        }\n      }\n      return true\n    }\n\n    return false\n  }\n\n  _extractValuesFromEvent(event, el) {\n    let keys = Object.keys(event)\n    let values = {}\n    console.group(`Extracting values from event:`)\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i]\n      if (this._availableKeysForEvent.indexOf(key) === -1) {\n        console.log(`Invalid key for GA event:\"' + key + '\".`)\n        continue\n      }\n\n      let value = event[key]\n      if (typeof value === 'function') {\n        console.info(`Return type of the event key \"${key}\" is a function.`)\n        values[key] = value.apply(el)\n      } else {\n        console.info(\n          `Return type of the event key \"${key}\" is a literal \"${value}\".`\n        )\n        values[key] = value\n      }\n    }\n    console.group('Values:')\n    console.log(values)\n    console.groupEnd()\n    console.groupEnd()\n    return values\n  }\n}\n"],"names":["events","_mandatoryKeys","_availableKeysForEvent","console","group","log","this","groupEnd","_isValidConfig","addEvents","event","instance","el","document","querySelectorAll","i","length","addEventListener","domEvent","undefined","ga","Object","assign","hitType","_extractValuesFromEvent","error","self","forEach","info","eventCategory","addEvent","Array","currentEvent","j","currentMandatoryKey","hasOwnProperty","keys","values","key","indexOf","value","apply"],"mappings":"oPACcA,gHACLA,OAASA,OACTC,eAAiB,CAAC,WAAY,KAAM,gBAAiB,oBACrDC,uBAAyB,CAC5B,gBACA,cACA,aACA,cAGFC,QAAQC,MAAM,qBACdD,QAAQE,IAAIC,KAAKN,QACjBG,QAAQI,YAEJD,KAAKE,sBAGD,wCAFDC,UAAUH,KAAKN,gEAMfU,WACHC,EAAWL,KAEXM,EAAKC,SAASC,iBAAiBJ,EAAME,IAChCG,EAAI,EAAGA,EAAIH,EAAGI,OAAQD,IAC7BH,EAAGG,GAAGE,iBAAiBP,EAAMQ,UAAU,gBAC1BC,IAAPC,GACFA,GACE,OACAC,OAAOC,OACL,CAAEC,QAAS,SACXZ,EAASa,wBAAwBd,EAAOJ,QAI5CH,QAAQsB,MACN,iGAOAzB,OACF0B,EAAOpB,KACbN,EAAO2B,SAAQ,SAACjB,GACdP,QAAQyB,6BAAsBlB,EAAMmB,qBACpCH,EAAKI,SAASpB,kDAKZJ,KAAKN,kBAAkB+B,OAASzB,KAAKN,OAAOgB,OAAS,EAAG,CAC1Db,QAAQyB,KAAK,oDACR,IAAIb,EAAI,EAAGA,EAAIT,KAAKN,OAAOgB,OAAQD,YAClCiB,EAAe1B,KAAKN,OAAOe,GACtBkB,EAAI,EAAGA,EAAI3B,KAAKL,eAAee,OAAQiB,IAAK,KAC/CC,EAAsB5B,KAAKL,eAAegC,MAC9C9B,QAAQyB,4DAC0CM,SAG/CF,EAAaG,eAAeD,IACS,OAAtCF,EAAaE,UAEb/B,QAAQsB,+CAC4BQ,gDAAsCC,wBAEnE,SAIN,SAGF,kDAGexB,EAAOE,OACzBwB,EAAOf,OAAOe,KAAK1B,GACnB2B,EAAS,GACblC,QAAQC,2CACH,IAAIW,EAAI,EAAGA,EAAIqB,EAAKpB,OAAQD,IAAK,KAChCuB,EAAMF,EAAKrB,OACmC,IAA9CT,KAAKJ,uBAAuBqC,QAAQD,QAKpCE,EAAQ9B,EAAM4B,GACG,mBAAVE,GACTrC,QAAQyB,6CAAsCU,uBAC9CD,EAAOC,GAAOE,EAAMC,MAAM7B,KAE1BT,QAAQyB,6CAC2BU,6BAAsBE,SAEzDH,EAAOC,GAAOE,QAZdrC,QAAQE,wDAeZF,QAAQC,MAAM,WACdD,QAAQE,IAAIgC,GACZlC,QAAQI,WACRJ,QAAQI,WACD8B"}