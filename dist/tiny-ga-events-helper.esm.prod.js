function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=["domEvent","el","eventCategory","eventAction"],o=["eventCategory","eventAction","eventLabel","eventValue"],r=function(){function r(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{debug:!1};if(e(this,r),!ga)throw"Google Analytics not included or blocked by the browser.";if(this.events=n,this.options=t,this.options.debug&&(console.group("Received events: "),console.log(this.events),console.groupEnd()),!r.isValidConfig(this.events))throw"Invalid configuration exception.";this.addEvents(this.events)}var a,l,i;return a=r,i=[{key:"isValidConfig",value:function(e){if(!Array.isArray(e)||0===e.length)return!1;for(var n=0;n<e.length;n++)for(var o=e[n],r=0;r<t.length;r++){var a=t[r];if(!o.hasOwnProperty(a)||null===o[a])return console.warn('The configuration at position "'.concat(r,'" doesn\'t have the mandatory key "').concat(a,"\" or it's null.")),!1}return!0}},{key:"extractValuesFromEvent",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object.keys(e),a={};t&&console.group("Extracting values from event:");for(var l=0;l<r.length;l++){var i=r[l];if(o.includes(i)){var s=e[i];"function"==typeof s?(t&&console.info('Return type of the event key "'.concat(i,'" is a function.')),a[i]=s.apply(n)):(t&&console.info('Return type of the event key "'.concat(i,'" is a literal "').concat(s,'".')),a[i]=s)}else t&&console.log("Invalid key for GA event:\"' + key + '\".")}return t&&(console.group("Values:"),console.log(a),console.groupEnd(),console.groupEnd()),a}}],(l=[{key:"addEvent",value:function(e){for(var n=this,t=document.querySelectorAll(e.el),o=0;o<t.length;o++){var a=t[o],l=function(){ga&&ga("send",Object.assign({hitType:"event"},r.extractValuesFromEvent(e,this,n.options.debug)))};a.addEventListener(e.domEvent,l),e.handlers=e.handlers||new Map,e.handlers.set(a,l)}}},{key:"addEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.length>0&&e.map(this.addEvent.bind(this))}},{key:"destroy",value:function(){for(var e=0;e<this.events.length;e++)for(var n=this.events[e],t=document.querySelectorAll(n.el),o=0;o<t.length;o++){var r=t[o];r.removeEventListener(n.domEvent,n.handlers.get(r)),n.handlers.delete(r)}}}])&&n(a.prototype,l),i&&n(a,i),r}();export default r;
