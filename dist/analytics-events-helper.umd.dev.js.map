{"version":3,"file":"analytics-events-helper.umd.dev.js","sources":["../src/analytics-events-helper.js"],"sourcesContent":["export default class AnalyticsEventsHelper {\n  constructor(events) {\n    this.events = events\n    this._mandatoryKeys = ['domEvent', 'el', 'eventCategory', 'eventAction']\n    this._availableKeysForEvent = [\n      'eventCategory',\n      'eventAction',\n      'eventLabel',\n      'eventValue',\n    ]\n\n    console.group('Received events: ')\n    console.log(this.events)\n    console.groupEnd()\n\n    if (this._isValidConfig()) {\n      this.addEvents(this.events)\n    } else {\n      throw 'Invalid configuration exception.'\n    }\n  }\n\n  addEvent(event) {\n    let instance = this\n\n    let el = document.querySelectorAll(event.el)\n    for (let i = 0; i < el.length; i++) {\n      el[i].addEventListener(event.domEvent, function () {\n        if (ga !== undefined) {\n          ga(\n            'send',\n            Object.assign(\n              { hitType: 'event' },\n              instance._extractValuesFromEvent(event, this)\n            )\n          )\n        } else {\n          console.error(\n            'Google Analytics not included or blocked by the browser.'\n          )\n        }\n      })\n    }\n  }\n\n  addEvents(events) {\n    const self = this\n    events.forEach((event) => {\n      console.info(`Adding event \"${event.eventCategory}\".`)\n      self.addEvent(event)\n    })\n  }\n\n  _isValidConfig() {\n    if (this.events instanceof Array && this.events.length > 0) {\n      console.info('Configuration is Array and bigger than zero.')\n      for (let i = 0; i < this.events.length; i++) {\n        let currentEvent = this.events[i]\n        for (let j = 0; j < this._mandatoryKeys.length; j++) {\n          let currentMandatoryKey = this._mandatoryKeys[j]\n          console.info(\n            `Checking if configuration has mandatory key \"${currentMandatoryKey}\"`\n          )\n          if (\n            !currentEvent.hasOwnProperty(currentMandatoryKey) ||\n            currentEvent[currentMandatoryKey] === null\n          ) {\n            console.error(\n              `The configuration at position \"${j}\" doesn't have the mandatory key \"${currentMandatoryKey}\" or it's null.`\n            )\n            return false\n          }\n        }\n      }\n      return true\n    }\n\n    return false\n  }\n\n  _extractValuesFromEvent(event, el) {\n    let keys = Object.keys(event)\n    let values = {}\n    console.group(`Extracting values from event:`)\n    for (let i = 0; i < keys.length; i++) {\n      let key = keys[i]\n      if (this._availableKeysForEvent.indexOf(key) === -1) {\n        console.log(`Invalid key for GA event:\"' + key + '\".`)\n        continue\n      }\n\n      let value = event[key]\n      if (typeof value === 'function') {\n        console.info(`Return type of the event key \"${key}\" is a function.`)\n        values[key] = value.apply(el)\n      } else {\n        console.info(\n          `Return type of the event key \"${key}\" is a literal \"${value}\".`\n        )\n        values[key] = value\n      }\n    }\n    console.group('Values:')\n    console.log(values)\n    console.groupEnd()\n    console.groupEnd()\n    return values\n  }\n}\n"],"names":["AnalyticsEventsHelper","events","_mandatoryKeys","_availableKeysForEvent","console","group","log","groupEnd","_isValidConfig","addEvents","event","instance","el","document","querySelectorAll","i","length","addEventListener","domEvent","ga","undefined","Object","assign","hitType","_extractValuesFromEvent","error","self","forEach","info","eventCategory","addEvent","Array","currentEvent","j","currentMandatoryKey","hasOwnProperty","keys","values","key","indexOf","value","apply"],"mappings":"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"}